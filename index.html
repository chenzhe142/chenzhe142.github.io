<!doctype html>



  


<html class="theme-next pisces use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>






<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Zhe Chen, Front End, Blog" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta name="description" content="🇨🇳 software engineer in Seattle. Coding &amp; writing with JavaScript, HTML, CSS and ❤️">
<meta property="og:type" content="website">
<meta property="og:title" content="Zhe Chen">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Zhe Chen">
<meta property="og:description" content="🇨🇳 software engineer in Seattle. Coding &amp; writing with JavaScript, HTML, CSS and ❤️">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Zhe Chen">
<meta name="twitter:description" content="🇨🇳 software engineer in Seattle. Coding &amp; writing with JavaScript, HTML, CSS and ❤️">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>Zhe Chen</title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  














  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Zhe Chen</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Blog for Front End Technologies</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/17/write-component/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zhe Chen">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhe Chen">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/05/17/write-component/" itemprop="url">设计和编写front end component</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-05-17T19:26:56-07:00">
                2017-05-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Front-end/" itemprop="url" rel="index">
                    <span itemprop="name">Front end</span>
                  </a>
                </span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Front-end/前端/" itemprop="url" rel="index">
                    <span itemprop="name">前端</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>本文的结构和理念参考自：<a href="http://web.jobbole.com/87164/" target="_blank" rel="external">http://web.jobbole.com/87164/</a></p>
<h1 id="文章的初衷"><a href="#文章的初衷" class="headerlink" title="文章的初衷"></a>文章的初衷</h1><p>现在的工作中往往依赖React.js，Backbone.js等等这样的framework来编写component，却对framework内部的逻辑知之甚少。于是在脱离开framework时，几乎难以仅仅使用vanilla JavaScript，HTML和CSS来单独进行开发。</p>
<p>这篇文章的目的是总结归纳，在不依赖framework时开发component的几个基本的步骤，使自己未来的工作更高效，并且更少地依赖于framework的逻辑，使得自己代码的复用率显著提高，相同地，也促进对framework原理和逻辑的理解。</p>
<h1 id="为什么要开发component"><a href="#为什么要开发component" class="headerlink" title="为什么要开发component"></a>为什么要开发component</h1><p>原因非常简单：</p>
<ol>
<li>提高code maintainability</li>
<li>提高code reusability</li>
</ol>
<p>核心思想：<a href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself" target="_blank" rel="external">DRY (don’t repeat your self)</a></p>
<h1 id="具体实现"><a href="#具体实现" class="headerlink" title="具体实现"></a>具体实现</h1><h2 id="requirement"><a href="#requirement" class="headerlink" title="requirement"></a>requirement</h2><p>假定我们要实现Facebook news feed card的设计：<br><img src="/2017/05/17/write-component/write-component-1.png" alt="news feed card" title="news feed card"></p>
<h2 id="breakdown"><a href="#breakdown" class="headerlink" title="breakdown"></a>breakdown</h2><ol>
<li>Model：存储需要render这个news feed card的data（如发布者，标题，图片链接）以及储存一些前端使用的状态data（例如是否有点赞，是否播放当前视频）</li>
<li>View：ui，可视部分</li>
<li>Controller：逻辑处理，例如如何request评论data，如何send request</li>
</ol>
<h1 id="方法和步骤"><a href="#方法和步骤" class="headerlink" title="方法和步骤"></a>方法和步骤</h1><h2 id="Model"><a href="#Model" class="headerlink" title="Model"></a>Model</h2><p>Model是储存数据的地方，可以在这里做ajax call，也可以在controller内进行，取决于你的需求。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> getNewsFeedModel = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">title</span>: <span class="string">'news feed title'</span>,</div><div class="line">    <span class="attr">description</span>: <span class="string">'news feed description'</span>,</div><div class="line">    <span class="attr">imgSrc</span>: <span class="string">'http://placehold.it/350x150'</span>,  </div><div class="line">  &#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="View"><a href="#View" class="headerlink" title="View"></a>View</h2><p>View的核心是构建一个供component使用的template，这个template可以预先放置于HTML DOM tree中，也可以直接将其写于template function中。</p>
<p><strong>第一个方法：使用<code>&lt;template&gt;</code> tag</strong><br>See <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/template" target="_blank" rel="external">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/template</a></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">"news-feed"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"news-feed"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"news-img"</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">""</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">article</span> <span class="attr">class</span>=<span class="string">"news-details"</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">article</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></div></pre></td></tr></table></figure>
<p><code>&lt;template&gt;</code> 不同browser的支持状况不同，推荐使用前检查<a href="http://caniuse.com/#feat=template" target="_blank" rel="external">Can I use</a>上的browser支持状况。</p>
<p>这里有一个小的变种，使用<code>&lt;script type=&quot;text/template&quot;&gt;</code> tag（Backbone在构建Backbone view的template时也使用这样的方法）。</p>
<p>因浏览器不能识别<code>text/template</code>这个MIME type，因此browser会忽略parse这个tag。借助这个特性，我们可以把template放入<code>&lt;script&gt;</code>tag内，供我们的javascript代码读取。代码示例如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/template"</span> <span class="attr">id</span>=<span class="string">"news-feed"</span>&gt;</span><span class="javascript"></span></div><div class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"news-feed"</span>&gt;</div><div class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"news-img"</span>&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">""</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">article</span> <span class="attr">class</span>=<span class="string">"news-details"</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">article</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>在使用<code>&lt;template&gt;</code>tag时，我们只需要选择<code>#news-feed</code>，inject data，并生成和返回一份DOM Node Copy。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> getNewsFeedView = <span class="function"><span class="keyword">function</span>(<span class="params">model</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> template = <span class="built_in">document</span>.querySelector(<span class="string">'#news-feed'</span>);</div><div class="line">  <span class="keyword">const</span> title = template.content.querySelector(<span class="string">'h2'</span>);</div><div class="line">  <span class="keyword">const</span> description = template.content.querySelector(<span class="string">'p'</span>);</div><div class="line">  <span class="keyword">const</span> img = template.content.querySelector(<span class="string">'img'</span>);</div><div class="line"></div><div class="line">  title.text = model.title;</div><div class="line">  description.text = model.description;</div><div class="line">  img.src = model.imgSrc;</div><div class="line"></div><div class="line">  <span class="comment">// see https://developer.mozilla.org/en-US/docs/Web/API/Document/importNode</span></div><div class="line">  <span class="keyword">return</span> <span class="built_in">document</span>.importNode(template.content, <span class="literal">true</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>第二个方法：直接在view-generating function内写入template string</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">cpnst getNewsFeedView = <span class="function"><span class="keyword">function</span>(<span class="params">model</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> template = [</div><div class="line">    <span class="string">'&lt;div class="news-feed"&gt;'</span>,</div><div class="line">      <span class="string">'&lt;div class="news-img"&gt;'</span></div><div class="line">        <span class="string">`&lt;img src="<span class="subst">$&#123;model.imgSrc&#125;</span>"&gt;`</span></div><div class="line">      <span class="string">'&lt;/div&gt;'</span>,</div><div class="line">      <span class="string">'&lt;article class="news-details"&gt;'</span>,</div><div class="line">        <span class="string">'&lt;h2&gt;'</span>,</div><div class="line">          model.title,</div><div class="line">        <span class="string">'&lt;/h2&gt;'</span></div><div class="line">        <span class="string">'&lt;p&gt;'</span>,</div><div class="line">          model.description</div><div class="line">        <span class="string">'&lt;/p&gt;'</span>,</div><div class="line">      <span class="string">'&lt;/article&gt;'</span>,</div><div class="line">    <span class="string">'&lt;/div&gt;'</span></div><div class="line">  ].join(<span class="string">''</span>);</div><div class="line"></div><div class="line">  <span class="keyword">return</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这种方法的缺点是代码的可维护性比较差，如果需要修改html markup，需要进行大量的修改，且不够直观。因此，更推荐使用第一种方法。</p>
<h2 id="Controller"><a href="#Controller" class="headerlink" title="Controller"></a>Controller</h2><p>这部分的功能是在各个不同的event和state下，调用View的方法。例如click button to load more news feed。在这里可以attach各个DOM event。</p>
<h1 id="尾声"><a href="#尾声" class="headerlink" title="尾声"></a>尾声</h1><p>经过本文的总结，我们可以发现，脱离开framework进行开发，其实很简单，也很强大。对我来说，最宝贵的一点是加深了对DOM的理解、以及如何高效和有效地剥离开各个部件，进行有效的代码利用。</p>
<p>阅读完本文后，不妨放下手中的framework，尝试用最简单的工具，从头构建一个component。相信你会受益匪浅。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/15/flexbox-layout/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zhe Chen">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhe Chen">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/05/15/flexbox-layout/" itemprop="url">用Flexbox实现整个页面的layout</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-05-15T21:45:42-07:00">
                2017-05-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Front-end/" itemprop="url" rel="index">
                    <span itemprop="name">Front end</span>
                  </a>
                </span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Front-end/前端/" itemprop="url" rel="index">
                    <span itemprop="name">前端</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近面试了几家美帝大公司的front end职位。在这几次面试中，几乎每次面试的css题目中都有涉及到flexbox的layout。可以看出，flexbox在工业界的使用还是很广泛的。（我几乎没有被问到关于float的问题）</p>
<p>这篇文章会总结flexbox的常用技巧，以及适用场景。未来会添加grid system的信息和内容。</p>
<p>本文的实例参考自<a href="http://tutorialzine.com/2017/03/css-grid-vs-flexbox/" target="_blank" rel="external">css grid vs flexbox</a></p>
<h1 id="两个例子"><a href="#两个例子" class="headerlink" title="两个例子"></a>两个例子</h1><h2 id="用于整个页面的layout"><a href="#用于整个页面的layout" class="headerlink" title="用于整个页面的layout"></a>用于整个页面的layout</h2><p>假设我们有如下的page design:</p>
<img src="/2017/05/15/flexbox-layout/flexbox-layout-1.png" alt="page layout" title="page layout">
<p>我们可以看到，page上有navbar，main content（分左右两栏），以及footer（未包含在截图中）。这样的layout下可以使用flexbox吗？</p>
<p>当然可以！通过以下几个步骤，即可实现一个简单的layout：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">1. 把这几个component放入一个`div`中，</div><div class="line">   即flexbox的container部分，将其设置为`display: flex`。</div><div class="line"></div><div class="line">2. 设置`flex-direction: column`。</div><div class="line">   这个property可以将flexbox的component放置的位置设置为列。</div><div class="line"></div><div class="line">3. 设置`justify-content: space-between`。</div><div class="line">   这个property的值会告诉浏览器如何计算flexbox中element的间隔和位置。</div></pre></td></tr></table></figure>
<h2 id="用于某一个小的component的layout"><a href="#用于某一个小的component的layout" class="headerlink" title="用于某一个小的component的layout"></a>用于某一个小的component的layout</h2><p>在上例，我们应用flexbox实现一个页面的整体layout。</p>
<p>如果我们想做card container的layout，且使其支持responsive design，（design如下图，直接用了Thumbtack网站上的card design截图 🙃）</p>
<img src="/2017/05/15/flexbox-layout/flexbox-layout-2.png" alt="design - big screen" title="design - big screen">
<img src="/2017/05/15/flexbox-layout/flexbox-layout-3.png" alt="design - small screen)" title="design - small screen)">
<p>以上layout也可以使用flexbox，且非常简便。</p>
<p>具体的实现如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"perks"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"perks--body"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"perks--groups"</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"perks--group"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"perks--image"</span> <span class="attr">style</span>=<span class="string">"background-image: url(https://static6.thumbtackstatic.com/_assets/images/release/pages/jobs/submodules/perks/images/office-22209281.jpg);"</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Office &amp;amp; culture<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"perks--list"</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"perks--item"</span>&gt;</span>In-house culinary team<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"perks--item"</span>&gt;</span>$450 quarterly product stipend<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"perks--item"</span>&gt;</span>Rooftop deck with 360&amp;deg; view<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"perks--item"</span>&gt;</span>Quarterly social events<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"perks--item"</span>&gt;</span>Joyride iced coffee on tap<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"perks--item"</span>&gt;</span>Shuffleboard &amp;amp; foosball<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"perks--group"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"perks--image"</span> <span class="attr">style</span>=<span class="string">"background-image: url(https://static7.thumbtackstatic.com/_assets/images/release/pages/jobs/submodules/perks/images/wellness-7fda7cd8.jpg);"</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Health &amp;amp; wellness<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"perks--list"</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"perks--item"</span>&gt;</span>Yoga &amp;amp; fitness classes<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"perks--item"</span>&gt;</span>Maternity &amp;amp; paternity leave<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"perks--item"</span>&gt;</span>Health, vision &amp;amp; dental plans<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"perks--item"</span>&gt;</span>Healthy snacks &amp;amp; drinks<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"perks--item"</span>&gt;</span>Unlimited vacation time<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"perks--group"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"perks--image"</span> <span class="attr">style</span>=<span class="string">"background-image: url(https://static6.thumbtackstatic.com/_assets/images/release/pages/jobs/submodules/perks/images/presentation-ede318f4.jpg);"</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Professional development<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"perks--list"</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"perks--item"</span>&gt;</span>$5,000 conference stipend<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"perks--item"</span>&gt;</span>$1,250 education stipend<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"perks--item"</span>&gt;</span>Employee visa sponsorship<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"perks--item"</span>&gt;</span>Mentorship program<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"perks--item"</span>&gt;</span>Skill development workshops<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"perks--item"</span>&gt;</span>Toastsmasters International<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// media query breakpoint</span></div><div class="line"><span class="variable">$mobile</span>: <span class="string">"(max-width: 900px)"</span>;</div><div class="line"></div><div class="line"><span class="variable">$container-width</span>: <span class="number">900px</span>;</div><div class="line"><span class="variable">$card-margin-right</span>: <span class="number">10px</span>;</div><div class="line"><span class="variable">$card-margin-bottom</span>: <span class="number">8px</span>;</div><div class="line"></div><div class="line"><span class="variable">$color-gray-light</span>: rgb(<span class="number">232</span>,<span class="number">234</span>,<span class="number">234</span>);</div><div class="line"><span class="variable">$color-gray-medium</span>: rgb(<span class="number">121</span>,<span class="number">120</span>,<span class="number">120</span>);</div><div class="line"><span class="variable">$color-white</span>: rgb(<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>);</div><div class="line"></div><div class="line"><span class="selector-class">.perks</span> &#123;</div><div class="line">  <span class="attribute">max-width</span>: <span class="variable">$container-width</span>;</div><div class="line">  <span class="attribute">font-family</span>: sans-serif;</div><div class="line"></div><div class="line">  <span class="selector-class">.perks--groups</span> &#123;</div><div class="line">    <span class="attribute">display</span>: flex;</div><div class="line">    <span class="attribute">flex-wrap</span>: wrap; <span class="comment">// support responsive</span></div><div class="line"></div><div class="line">    <span class="selector-class">.perks--group</span> &#123;</div><div class="line">      <span class="attribute">box-sizing</span>: border-box;</div><div class="line">      <span class="attribute">flex</span>: <span class="number">1</span>; <span class="comment">//设置每个.perks--group的宽度相等</span></div><div class="line"></div><div class="line">      <span class="attribute">display</span>: flex;</div><div class="line">      <span class="attribute">flex-direction</span>: column;</div><div class="line"></div><div class="line">      <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="variable">$color-gray-light</span>;</div><div class="line">      <span class="attribute">border-top-left-radius</span>: <span class="number">4px</span>;</div><div class="line">      <span class="attribute">border-top-right-radius</span>: <span class="number">4px</span>;</div><div class="line"></div><div class="line">      &amp;:not(:last-child) &#123;</div><div class="line">        <span class="attribute">margin-right</span>: <span class="variable">$card-margin-right</span>;</div><div class="line">      &#125;</div><div class="line"></div><div class="line">      <span class="selector-class">.perks--image</span> &#123;</div><div class="line">        <span class="attribute">display</span>: block;</div><div class="line">        <span class="attribute">height</span>: <span class="number">180px</span>;</div><div class="line">        <span class="attribute">position</span>: relative;</div><div class="line">        <span class="attribute">background-size</span>: cover;</div><div class="line">        <span class="attribute">background-repeat</span>: no-repeat;</div><div class="line"></div><div class="line">        <span class="selector-tag">h2</span> &#123;</div><div class="line">          <span class="attribute">text-align</span>: center;</div><div class="line">          <span class="attribute">position</span>: absolute;</div><div class="line">          <span class="attribute">bottom</span>: <span class="number">0</span>;</div><div class="line">          <span class="attribute">width</span>: <span class="number">100%</span>;</div><div class="line">          <span class="attribute">color</span>: <span class="variable">$color-white</span>;</div><div class="line">          <span class="attribute">font-weight</span>: <span class="number">400</span>;</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line"></div><div class="line">      <span class="selector-class">.perks--list</span> &#123;</div><div class="line">        <span class="attribute">padding</span>: <span class="number">12px</span> <span class="number">20px</span>;</div><div class="line"></div><div class="line">        <span class="selector-class">.perks--item</span> &#123;</div><div class="line">          <span class="attribute">padding</span>: <span class="number">12px</span> <span class="number">0</span>;</div><div class="line">          <span class="attribute">color</span>: <span class="variable">$color-gray-medium</span>;</div><div class="line"></div><div class="line">          &amp;:not(:last-child) &#123;</div><div class="line">            <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="variable">$color-gray-light</span>;</div><div class="line">          &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">@<span class="keyword">media</span> #&#123;<span class="variable">$mobile</span>&#125; &#123;</div><div class="line">  <span class="selector-class">.perks</span> &#123;</div><div class="line">    <span class="selector-class">.perks--groups</span> &#123;</div><div class="line"></div><div class="line">      <span class="selector-class">.perks--group</span> &#123;</div><div class="line">        <span class="attribute">width</span>: <span class="number">100%</span>;</div><div class="line"></div><div class="line">        &amp;:not(:last-child) &#123;</div><div class="line">          <span class="attribute">margin-bottom</span>: <span class="variable">$card-margin-bottom</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        &amp;:not(:last-child) &#123;</div><div class="line">          <span class="attribute">margin-right</span>: <span class="number">0</span>;</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在使用flexbox时有几个小技巧：</p>
<ol>
<li>当需要设置一个box内的flex component的宽度比时，灵活使用<code>flex</code>。<code>flex</code>是<code>flex-grow</code>, <code>flex-shrink</code>和<code>flex-basis</code>的简略写法。</li>
<li><code>align-items</code>可以纵向对其</li>
<li><code>flex-wrap</code>可以强制所有element在一行，或是分成几行。同media-query一起灵活使用，可以实现responsive design</li>
</ol>
<p>Codepen实例如下：</p>
<p></p><p data-height="300" data-theme-id="26195" data-slug-hash="ybjXZQ" data-default-tab="html,result" data-user="chenzhe142" data-embed-version="2" data-pen-title="ybjXZQ" class="codepen">See the Pen <a href="http://codepen.io/chenzhe142/pen/ybjXZQ/" target="_blank" rel="external">ybjXZQ</a> by Zhe Chen (<a href="http://codepen.io/chenzhe142" target="_blank" rel="external">@chenzhe142</a>) on <a href="http://codepen.io" target="_blank" rel="external">CodePen</a>.</p><p></p>
<script async src="https://production-assets.codepen.io/assets/embed/ei.js"></script>

<h1 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h1><p>flexbox非常简单易用，且可以实现非常棒的layout效果，对比float，减少了大量的css的使用，也使代码更易维护。唯一的缺点可以说是实现responsive design，运用media-query时还比较繁琐，需要一点一点地精确调整margin，padding或者其他property的值。</p>
<p>综上所述，flexbox非常强大，值得我们深入学习和应用。</p>
<h2 id="参考链接："><a href="#参考链接：" class="headerlink" title="参考链接："></a>参考链接：</h2><ol>
<li><a href="https://css-tricks.com/snippets/css/a-guide-to-flexbox/" target="_blank" rel="external">css-tricks - a guide to flexbox</a></li>
<li><a href="http://tutorialzine.com/2017/03/css-grid-vs-flexbox/" target="_blank" rel="external">css grid vs flexbox</a></li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/10/10/react-minimize/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zhe Chen">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhe Chen">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/10/10/react-minimize/" itemprop="url">Tricks to minimize React.js build file size</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-10-10T14:30:10-07:00">
                2016-10-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Front-end/" itemprop="url" rel="index">
                    <span itemprop="name">Front end</span>
                  </a>
                </span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Front-end/前端/" itemprop="url" rel="index">
                    <span itemprop="name">前端</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>When using React.js in my personal projects, I found out that when the project grows bigger and bigger, the final build file gets bigger and bigger as well.</p>
<p>The build JavaScript file easily goes above 1MB, even though I only have less than 10 React components.</p>
<img src="/2016/10/10/react-minimize/react-minimize-1.png" alt="React generated build size" title="React generated build size">
<p>With this huge file size, the page spends 4 seconds to download JavaScript and CSS files, and total 7 seconds for initial page rendering.<br>This is definitely not good.</p>
<p>Not good for page performance, neither for user experience.</p>
<p>So, how can I minimize the file size?</p>
<p>I spent some time looking around all possible solutions, and here are some efficient tricks that can solve the problem.</p>
<h2 id="Tricks"><a href="#Tricks" class="headerlink" title="Tricks"></a>Tricks</h2><h3 id="minify-front-end-code"><a href="#minify-front-end-code" class="headerlink" title="minify front end code"></a>minify front end code</h3><p>This is the most commonly used method when we want to minimize front end file size. If using Webpack as React.js build tool, we can use <code>webpack.optimize.UglifyJsPlugin</code> to minify front-end needed files.</p>
<h3 id="create-production-env-variable-in-Webpack-config"><a href="#create-production-env-variable-in-Webpack-config" class="headerlink" title="create production env variable in Webpack config"></a>create production env variable in Webpack config</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">new webpack.DefinePlugin(&#123;</div><div class="line">  &apos;process.env&apos;: &#123;</div><div class="line">    &apos;NODE_ENV&apos;: JSON.stringify(&apos;production&apos;)</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h3 id="tree-shake"><a href="#tree-shake" class="headerlink" title="tree shake"></a>tree shake</h3><p>According to current stable version (1.13.2), Webpack does not support ES6 tree shaking. But there is one little trick we can use:<br>When setting up babel config, use the following preset:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&quot;babel&quot;: &#123;</div><div class="line">  &quot;presets&quot;: [</div><div class="line">    &quot;react&quot;,</div><div class="line">    [</div><div class="line">      &quot;es2015&quot;,</div><div class="line">      &#123;</div><div class="line">       &quot;modules&quot;: false</div><div class="line">      &#125;</div><div class="line">    ]</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>With Webpack 1.13.2, tree-shaking works like magic. :)</p>
<h2 id="Before-vs-After"><a href="#Before-vs-After" class="headerlink" title="Before vs. After"></a>Before vs. After</h2><p>Use my personal project as an example. I have 10 React components (most of them are having long definitions and more than 5 functions). CSS is not included in the final bundle.js build file.</p>
<p>Here is result:</p>
<ul>
<li>original file size(with no optimization): 1.35MB</li>
<li>with tree-shaking: 576kB (-58.3%)</li>
<li>with tree-shaking + Production env variable: 544 kB (-60.6%)</li>
<li>plus minify: ~10% of previous step’s file size (544 kB)</li>
</ul>
<p>If using these 3 tricks together, the final size of bundle.js would be ~500kB, only 36.2% of its original size.</p>
<p>These 3 tricks are definitely powerful, and easy to use!</p>
<h2 id="Future-Webpack-2-0"><a href="#Future-Webpack-2-0" class="headerlink" title="Future: Webpack 2.0"></a>Future: Webpack 2.0</h2><p>I am excited to see Webpack 2 support ES6 tree shaking, and simpler way setting up Node.js production flag in Webpack config.</p>
<p>Currently Webpack is beta-testing v2.1 version. I am trying out different new features. It’s awesome to see Webpack is getting better and better!</p>
<h2 id="What’s-your-trick"><a href="#What’s-your-trick" class="headerlink" title="What’s your trick?"></a>What’s your trick?</h2><p>I would like to know what’s your trick when optimizing React.js performance. Leave a comment and let’s discuss!</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/09/15/react-native-folder-structure/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zhe Chen">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhe Chen">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/09/15/react-native-folder-structure/" itemprop="url">React native project setup — a better folder structure</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-09-15T06:40:12-07:00">
                2016-09-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Front-end/" itemprop="url" rel="index">
                    <span itemprop="name">Front end</span>
                  </a>
                </span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Front-end/前端/" itemprop="url" rel="index">
                    <span itemprop="name">前端</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Currently, I am building a small notebook app with React-native. While the framework has so much fun to play with, and make my life much better and easier to build cross-platform projects, it does give me some pain, especially when the project grows bigger and bigger.</p>
<p>My project folder got messy when I started creating new scenes, and global styles. At the very beginning of the development, I kept all style files inside of its React Component class definition file, declaring all styles (font size, color, background color, container flexbox, etc.).</p>
<p>But as soon as the scenes and components of the app gets more and more complicated (and some of the components were very similar, only have slightly differences, like font size, functions), I realized that I wrote too much duplicated code, copying and pasting them all over the project!</p>
<p>OK, it’s time to take some effort to clean up the folder , and refactor the code. Keep it DRY.</p>
<h2 id="Here-is-the-structure-I’m-using-for-my-React-native-project"><a href="#Here-is-the-structure-I’m-using-for-my-React-native-project" class="headerlink" title="Here is the structure I’m using for my React-native project:"></a>Here is the structure I’m using for my React-native project:</h2><img src="/2016/09/15/react-native-folder-structure/folder-structure-1.png" alt="folder structure" title="folder structure">
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">/android: Android native code</div><div class="line">/build: stores iOS apk and Android app installation packages</div><div class="line">/ios: iOS native code</div><div class="line">/public: stores images, audios and other assets</div><div class="line">/src: JavaScript source files</div><div class="line">  constants.js: I put all constant variables into this file</div><div class="line">  /components: React-native components, such buttons, lists</div><div class="line">  /scenes</div><div class="line">  /style: shared style files, text, colors, etc.</div><div class="line">  /utils: reusable functions</div><div class="line">index.android.js: Android entry file</div><div class="line">index.ios.js: iOS entry file</div></pre></td></tr></table></figure>
<h2 id="Here-are-3-steps-that-I-followed-to-re-organize-the-folder"><a href="#Here-are-3-steps-that-I-followed-to-re-organize-the-folder" class="headerlink" title="Here are 3 steps that I followed to re-organize the folder:"></a>Here are 3 steps that I followed to re-organize the folder:</h2><h3 id="1-Move-all-components-into-a-separate-folder"><a href="#1-Move-all-components-into-a-separate-folder" class="headerlink" title="1. Move all components into a separate folder"></a>1. Move all components into a separate folder</h3><img src="/2016/09/15/react-native-folder-structure/folder-structure-2.png" alt="folder structure 2" title="folder structure 2">
<h3 id="2-Put-style-code-into-a-separate-file"><a href="#2-Put-style-code-into-a-separate-file" class="headerlink" title="2. Put style code into a separate file"></a>2. Put style code into a separate file</h3><img src="/2016/09/15/react-native-folder-structure/folder-structure-3.png" alt="folder structure 3" title="folder structure 3">
<p>My app uses 4 different styles of text, title, subtitle, paragraphs, data. It would be much more easier to just import the style of text, and use it directly.<br>I put shared text styles in to text.js file:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> text = StyleSheet.create(&#123;</div><div class="line">    <span class="attr">p</span>: &#123;</div><div class="line">      <span class="attr">color</span>: <span class="string">'black'</span>,</div><div class="line">      <span class="attr">fontFamily</span>: <span class="string">'Open Sans'</span>,</div><div class="line">      <span class="attr">fontSize</span>: <span class="number">14</span>,</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">title</span>: &#123;</div><div class="line">      <span class="attr">fontWeight</span>: <span class="string">'bold'</span>,</div><div class="line">      <span class="attr">color</span>: <span class="string">'black'</span>,</div><div class="line">      <span class="attr">fontFamily</span>: <span class="string">'Open Sans'</span>,</div><div class="line">      <span class="attr">fontSize</span>: <span class="number">20</span>,</div><div class="line">    &#125;,    </div><div class="line">    <span class="attr">subTitle</span>: &#123;</div><div class="line">      <span class="attr">fontWeight</span>: <span class="string">'bold'</span>,</div><div class="line">      <span class="attr">color</span>: <span class="string">'black'</span>,</div><div class="line">      <span class="attr">fontFamily</span>: <span class="string">'Open Sans'</span>,</div><div class="line">      <span class="attr">fontSize</span>: <span class="number">14</span>,</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">data</span>: &#123;</div><div class="line">      <span class="attr">color</span>: <span class="string">'black'</span>,</div><div class="line">      <span class="attr">fontFamily</span>: <span class="string">'Open Sans'</span>,</div><div class="line">      <span class="attr">fontSize</span>: <span class="number">25</span>,</div><div class="line">    &#125;,</div><div class="line"></div><div class="line">  &#125;);</div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> text;</div></pre></td></tr></table></figure>
<p>When defining React component, you can simply import this text style, and use it directly.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;Text style=&#123;text.p&#125;&gt;settings&lt;/Text&gt;</div></pre></td></tr></table></figure></p>
<p>Overriding the style is very easy, just like the way we do with CSS inline styles :)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;Text style=&#123;[text.p, &#123;backgroundColor: &apos;red&apos;]&#125;&gt;settings&lt;/Text&gt;</div></pre></td></tr></table></figure></p>
<p>The idea of separating style code by fundamental components is inspired by Atomic Design. It believes small atoms build up big elements.</p>
<p>I think the idea is very similar to the concept of React-Native, focusing on building components. So I tried it out in this way, so far so good!</p>
<h3 id="3-Move-shared-functions-into-a-separate-folder"><a href="#3-Move-shared-functions-into-a-separate-folder" class="headerlink" title="3. Move shared functions into a separate folder"></a>3. Move shared functions into a separate folder</h3><img src="/2016/09/15/react-native-folder-structure/folder-structure-4.png" alt="folder structure 4" title="folder structure 4">
<p>This idea is came from Airbnb’s open source library, react-dates. Originally, I was checking its source code, and get some ideas on my editor linting config. But soon I realized that the way Airbnb organizes source files was amazing and elegant.</p>
<p>This makes my code easy to maintain, but also much more easier to access in different components. If the code is much more easy to maintain than before, I am sure the development process would be more smooth, and so as my productivity.</p>
<h2 id="Ending"><a href="#Ending" class="headerlink" title="Ending"></a>Ending</h2><p>This folder structure saves me so many efforts on modifying shared styles! Before organizing the folder into this way, I need to go to each component, find out the specific line for a specific style definition. But now, all I need to do is going straight to the style file, open it, and change it. That’s it!</p>
<p>Now, developing in React-native truly becomes one of the best tasks in my spare time, and I am more productive and organized.</p>
<p>Hope this article can give you some ideas and inspirations on gathering your project files.</p>
<p>Happy coding! 🎉</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="Zhe Chen" />
          <p class="site-author-name" itemprop="name">Zhe Chen</p>
           
              <p class="site-description motion-element" itemprop="description">🇨🇳 software engineer in Seattle. Coding & writing with JavaScript, HTML, CSS and ❤️</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">4</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">2</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">7</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/chenzhe142" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Zhe Chen</span>
</div>



        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.1"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  





  






  





  

  

  

  

  

</body>
</html>
